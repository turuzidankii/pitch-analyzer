# éŸ³é¢‘éŸ³è°ƒåˆ†æå·¥å…·ä½¿ç”¨ç¤ºä¾‹

## åŸºæœ¬ä½¿ç”¨æ–¹æ³•

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. åˆ†æå•ä¸ªéŸ³é¢‘æ–‡ä»¶
```bash
python main.py audio1.wav --analyze-only
```

### 3. æ¯”è¾ƒä¸¤ä¸ªéŸ³é¢‘æ–‡ä»¶çš„éŸ³è°ƒ
```bash
python main.py audio1.wav audio2.wav
```

### 4. æ¯”è¾ƒå¤šä¸ªéŸ³é¢‘æ–‡ä»¶
```bash
python main.py audio1.wav audio2.wav audio3.wav
```

### 5. è¯¦ç»†è¾“å‡ºæ¨¡å¼
```bash
python main.py audio1.wav audio2.wav -v
```

### 6. ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
```bash
python main.py audio1.wav --analyze-only --visualize
```

### 7. è°ƒæ•´æ£€æµ‹å‚æ•°
```bash
# ä½¿ç”¨YINç®—æ³•
python main.py audio1.wav audio2.wav -m yin

# è®¾ç½®10%çš„éŸ³è°ƒå®¹å·®
python main.py audio1.wav audio2.wav -t 0.1

# è®¾ç½®é‡‡æ ·ç‡ä¸º44100Hz
python main.py audio1.wav audio2.wav -sr 44100
```

### 8. æ—¶é—´èŒƒå›´åˆ†æ ğŸ†•
```bash
# ä»1åˆ†é’Ÿå¼€å§‹åˆ†æåˆ°ç»“æŸ
python main.py audio1.wav --start-time 1:00 --analyze-only

# åˆ†æ1:00åˆ°1:25çš„ç‰‡æ®µ
python main.py audio1.wav --start-time 1:00 --end-time 1:25 --analyze-only

# åˆ†æ60ç§’åˆ°85ç§’çš„ç‰‡æ®µ
python main.py audio1.wav --start-time 60 --end-time 85 --analyze-only
```

### 9. éŸ³ç¨‹å˜åŒ–åˆ†æ ğŸ†•
```bash
# åŸºæœ¬éŸ³ç¨‹åˆ†æï¼ˆåˆ†æ0-10ç§’çš„éŸ³ç¨‹å˜åŒ–ï¼‰
python main.py audio1.wav --pitch-contour --start-time 0 --end-time 10

# é«˜ç²¾åº¦éŸ³ç¨‹åˆ†æï¼ˆ0.05ç§’å¸§å¤§å°ï¼‰
python main.py audio1.wav --pitch-contour --start-time 0 --end-time 10 --frame-size 0.05

# åˆ†æ1åˆ†é’Ÿåˆ°1åˆ†30ç§’çš„éŸ³ç¨‹å˜åŒ–
python main.py audio1.wav --pitch-contour --start-time 1:00 --end-time 1:30

# è¯¦ç»†éŸ³ç¨‹åˆ†æè¾“å‡º
python main.py audio1.wav --pitch-contour --start-time 0 --end-time 10 -v
```

# åˆ†æ1åˆ†é’Ÿåˆ°1åˆ†25ç§’çš„ç‰‡æ®µ
python main.py audio1.wav --start-time 1:00 --end-time 1:25 --analyze-only

# ä½¿ç”¨ç§’æ•°æ ¼å¼ï¼šåˆ†æ60ç§’åˆ°85ç§’
python main.py audio1.wav --start-time 60 --end-time 85 --analyze-only

# æ¯”è¾ƒä¸¤ä¸ªéŸ³é¢‘æ–‡ä»¶çš„ç›¸åŒæ—¶é—´æ®µ
python main.py audio1.wav audio2.wav --start-time 0:30 --end-time 1:00

# åˆ†æéŸ³é¢‘çš„æœ€å30ç§’ï¼ˆå‡è®¾éŸ³é¢‘é•¿åº¦ä¸º2åˆ†é’Ÿï¼‰
python main.py audio1.wav --start-time 1:30 --analyze-only
```

### æ—¶é—´æ ¼å¼è¯´æ˜
æ”¯æŒä»¥ä¸‹æ—¶é—´æ ¼å¼ï¼š
- `"1:30"` - 1åˆ†30ç§’
- `"0:45"` - 45ç§’  
- `"2:15.5"` - 2åˆ†15.5ç§’
- `"90"` - 90ç§’
- `"120.5"` - 120.5ç§’

## Python APIä½¿ç”¨

```python
from audio_pitch_analyzer import AudioPitchAnalyzer

# åˆ›å»ºåˆ†æå™¨
analyzer = AudioPitchAnalyzer(tolerance=0.05)

# åˆ†æéŸ³é¢‘æ–‡ä»¶
result1 = analyzer.analyze_pitch("audio1.wav")
result2 = analyzer.analyze_pitch("audio2.wav")

# æ¯”è¾ƒéŸ³è°ƒ
comparison = analyzer.compare_pitches(result1, result2)

print(f"éŸ³è°ƒæ˜¯å¦ç›¸åŒ: {comparison['is_same_pitch']}")
print(f"é¢‘ç‡å·®å¼‚: {comparison['frequency_difference']:.2f} Hz")
print(f"ç›¸å¯¹è¯¯å·®: {comparison['relative_error']:.1%}")

# ç”Ÿæˆå¯è§†åŒ–
analyzer.visualize_pitch_analysis(result1, "analysis1.png")

# éŸ³ç¨‹å˜åŒ–åˆ†æ ğŸ†•
contour_result = analyzer.analyze_pitch_contour("audio1.wav", 0, 10, frame_size=0.1)
analyzer.visualize_pitch_contour(contour_result, "contour.png")

print(f"éŸ³ç¨‹èŒƒå›´: {contour_result['statistics']['interval_range']:.1f} åŠéŸ³")
print(f"å¹³å‡é¢‘ç‡: {contour_result['statistics']['avg_frequency']:.1f} Hz")
```

## éŸ³ç¨‹åˆ†æåŠŸèƒ½è¯¦è§£ ğŸ†•

### ä»€ä¹ˆæ˜¯éŸ³ç¨‹åˆ†æï¼Ÿ
éŸ³ç¨‹åˆ†æåŠŸèƒ½å¯ä»¥åˆ†æéŸ³é¢‘åœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„éŸ³è°ƒå˜åŒ–ï¼Œä»¥åŠéŸ³ä¸ºå•ä½æ˜¾ç¤ºéŸ³ç¨‹çš„å˜åŒ–è¶‹åŠ¿ã€‚

### æ ¸å¿ƒå‚æ•°
- **start_time**: å¼€å§‹æ—¶é—´ï¼ˆç§’æˆ– mm:ss æ ¼å¼ï¼‰
- **end_time**: ç»“æŸæ—¶é—´ï¼ˆç§’æˆ– mm:ss æ ¼å¼ï¼‰
- **frame_size**: åˆ†æå¸§å¤§å°ï¼ˆç§’ï¼‰ï¼Œå½±å“åˆ†æç²¾åº¦
  - è¾ƒå°å€¼ï¼ˆ0.05sï¼‰: é«˜ç²¾åº¦ï¼Œé€‚åˆå¿«é€Ÿå˜åŒ–çš„éŸ³è°ƒ
  - è¾ƒå¤§å€¼ï¼ˆ0.2sï¼‰: ä½ç²¾åº¦ï¼Œé€‚åˆç¼“æ…¢å˜åŒ–çš„éŸ³è°ƒ

### è¾“å‡ºè¯´æ˜
éŸ³ç¨‹åˆ†æä¼šç”ŸæˆåŒ…å«ä¸‰ä¸ªå­å›¾çš„å¯è§†åŒ–å›¾è¡¨ï¼š
1. **éŸ³ç¨‹å˜åŒ–æŠ˜çº¿å›¾**: æ˜¾ç¤ºç›¸å¯¹äºèµ·å§‹éŸ³ç¬¦çš„éŸ³ç¨‹å˜åŒ–ï¼ˆåŠéŸ³ï¼‰
2. **é¢‘ç‡å˜åŒ–å›¾**: æ˜¾ç¤ºç»å¯¹é¢‘ç‡çš„å˜åŒ–ï¼ˆHzï¼‰
3. **ç½®ä¿¡åº¦å›¾**: æ˜¾ç¤ºæ£€æµ‹ç»“æœçš„å¯é æ€§

### åº”ç”¨åœºæ™¯
- åˆ†ææ­Œæ‰‹çš„éŸ³å‡†å˜åŒ–
- æ£€æµ‹éŸ³è°ƒæ»‘åŠ¨å’Œé¢¤éŸ³
- åˆ†æä¹å™¨æ¼”å¥çš„éŸ³ç¨‹å‡†ç¡®æ€§
- éŸ³ä¹æ•™å­¦ä¸­çš„éŸ³ç¨‹è®­ç»ƒ

### å¯è§†åŒ–å›¾è¡¨è¯´æ˜ ğŸ†•
éŸ³ç¨‹åˆ†æä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå­å›¾çš„ç§‘å­¦éŸ³é«˜è®°å·æ³•å›¾è¡¨ï¼š

1. **ä¸»éŸ³ç¨‹æŠ˜çº¿å›¾**
   - è“è‰²æŠ˜çº¿ï¼šéŸ³ç¨‹å˜åŒ–æ›²çº¿ï¼ˆä»¥åŠéŸ³ä¸ºå•ä½ï¼‰
   - å·¦ä¾§Yè½´ï¼šç›¸å¯¹éŸ³ç¨‹ï¼ˆåŠéŸ³æ•°ï¼‰
   - å³ä¾§Yè½´ï¼šç§‘å­¦éŸ³é«˜è®°å·æ³•ï¼ˆC4, D#4, F5ç­‰ï¼‰
   - é»„è‰²æ ‡æ³¨ï¼šæ˜¾è‘—éŸ³ç¨‹å˜åŒ–ç‚¹çš„éŸ³ç¬¦åç§°
   - çº¢è‰²åŸºçº¿ï¼šèµ·å§‹éŸ³ç¬¦å‚è€ƒçº¿

2. **é¢‘ç‡å˜åŒ–å›¾**
   - ç»¿è‰²æŠ˜çº¿ï¼šç»å¯¹é¢‘ç‡å˜åŒ–ï¼ˆHzï¼‰
   - æ˜¾ç¤ºéŸ³é¢‘çš„å®é™…é¢‘ç‡å˜åŒ–

3. **ç½®ä¿¡åº¦å›¾**
   - çº¢è‰²æŠ˜çº¿ï¼šæ£€æµ‹ç»“æœçš„å¯é æ€§
   - å€¼åŸŸï¼š0-1ï¼Œè¶Šé«˜è¡¨ç¤ºæ£€æµ‹è¶Šå¯é 

### ç§‘å­¦éŸ³é«˜è®°å·æ³•ç‰¹æ€§
- **è‡ªé€‚åº”æ ‡è®°èŒƒå›´**ï¼šæ ¹æ®éŸ³ç¨‹èŒƒå›´è‡ªåŠ¨è°ƒæ•´Yè½´æ ‡è®°
- **æ™ºèƒ½æ ‡æ³¨**ï¼šä»…åœ¨æ˜¾è‘—å˜åŒ–ç‚¹æ ‡æ³¨éŸ³ç¬¦ï¼Œé¿å…å›¾è¡¨è¿‡äºæ‹¥æŒ¤
- **æ ‡å‡†éŸ³ç¬¦æ ¼å¼**ï¼šä½¿ç”¨å›½é™…æ ‡å‡†çš„ç§‘å­¦éŸ³é«˜è®°å·ï¼ˆC4=ä¸­å¤®Cï¼‰
- **åŒè½´æ˜¾ç¤º**ï¼šåŒæ—¶æ˜¾ç¤ºåŠéŸ³æ•°å’ŒéŸ³ç¬¦åç§°ï¼Œä¾¿äºä¸åŒç”¨æˆ·ç†è§£
```

## æ”¯æŒçš„éŸ³é¢‘æ ¼å¼
- WAV (.wav)
- MP3 (.mp3)
- FLAC (.flac)
- M4A (.m4a)
- AAC (.aac)
- OGG (.ogg)
- WMA (.wma)

## æŠ€æœ¯å‚æ•°
- é»˜è®¤é‡‡æ ·ç‡: 22050 Hz
- é¢‘ç‡æ£€æµ‹èŒƒå›´: 80-2000 Hz
- é»˜è®¤éŸ³è°ƒå®¹å·®: 5%
- æ”¯æŒçš„æ£€æµ‹ç®—æ³•: piptrack, YIN, autocorr, multi

## æ³¨æ„äº‹é¡¹
1. éŸ³é¢‘æ–‡ä»¶åº”ä¸ºå•éŸ³æºï¼ˆå¦‚å•ä¸ªä¹å™¨æˆ–äººå£°ï¼‰æ•ˆæœæœ€ä½³
2. å»ºè®®éŸ³é¢‘é•¿åº¦åœ¨1-30ç§’ä¹‹é—´
3. æ¸…æ™°çš„å½•éŸ³è´¨é‡ä¼šæé«˜æ£€æµ‹å‡†ç¡®æ€§
4. èƒŒæ™¯å™ªå£°å¯èƒ½å½±å“æ£€æµ‹ç»“æœ

## æµ‹è¯•åŠŸèƒ½
è¿è¡Œå†…ç½®æµ‹è¯•ï¼š
```bash
python test_analyzer.py
```

è¿™å°†åˆ›å»ºæµ‹è¯•éŸ³é¢‘æ–‡ä»¶å¹¶éªŒè¯åˆ†æåŠŸèƒ½ã€‚
